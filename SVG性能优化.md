###SVG性能优化

@(Jβearmen)[前端|优化|SVG]

**SVG**是使用 XML 来描述二维图形和绘图程序的语言。在Ｈ5地图引擎中会用SVG技术做图形绘制，特别是在 Android 浏览器中进行图形操作时会遇到明显的性能问题，以下是针对SVG在浏览器绘制过程的一些优化总结与实践。
 


-------------------

[TOC]

####将属性“Pointer-event”设置为"None"

其实如果一个元素如果要是不需要产生任何事件的话，最好吧这个属性设置成none。其实每个元素都有很多事情，一次鼠标移动就可以让有用没有用的事件被激活，即便是没有事件处理函数，SVG解析器也是要处理这些事件消息的。所以为了减少解析器的工作负担，就直接屏蔽掉最好。


####重复标签定义在Defs中

Defs标签的作用就是为了复用，其实在软件开发过程中复用的思想是不可或缺的，在SVG技术中也是如此。Defs和g标签是容器元素，但是在Defs元素的子元素在解析的时候不会渲染，只有在use的时候才会渲染，所以这就是一次解析，到处渲染。


####Filter属性百分比

在filter元素中的属性x、y、width、height最好用百分比，能够将计算路径效果的区域减少到最小，加快图形的显示速度。


####减少透明度使用

对于opacity透明度来说，使用透明度确实能够增加美观度，但是却牺牲了很大的性能，如果有可能的话尽量使用fill-opacity或者stroke-opacity这两个开销小些的属性。


####重绘区域尽可能小

读者可以自己写一个SVG的移动的DEMO，一个将重绘区域即移动的位移大一些，一个小一些，再来观察CPU的占用率，会发现重绘区域是非常消耗性能的，所以需要将重绘区域尽可能小。


####使用shape-rendering="optimizeSeed"来替代反锯齿效果

这样做虽然会牺牲一些图质量，但对子“clipPaths”和某些图象的动画而言，却有很好的性能效果


####使用内部CSS属性

使用内部CSS样式表的渲染速度，要比使用外部的CSS样式表更快。


####尽量让多条<line>元素合并成一个<path>元素

这样可以减少内存占，加快渲染的速度。这条技功在ASV中屡试不爽，但在Opera和Firfox的SVG解释析器中却有着完全相反的效果，渲染速度会变得更慢。


####减少色彩渐变和滤镜

这两个效果也都是性能的消耗大户，需要尽量少使用。


####减少stroke属性使用

 Stroke属性也是非常消耗性能，主要是内部计算的开销会比较大，所以如果能用fill的地方就不要用stroke属性。


####另外一种就是从服务器端生成SVG发送到客户端

这种方法主要目的就是让客户端的事情更加单一些，主要负责图形的渲染，从而降低性能开销。







  [1]: http://blog.csdn.net/lfsf802/article/details/40628453
